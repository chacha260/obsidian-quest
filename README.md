# ⚔️ Obsidian Quest

**Obsidianでの執筆活動を「冒険」に変える、ゲーミフィケーション・プラグイン。**

Obsidian Questは、あなたのライティング、知識整理、タスク消化といった活動をRPGのステータス（経験値）に変換します。単なる文字数カウントではなく、**「どう書いたか」によって異なるキャラクターが成長するパーティ制システム**を採用しています。

*(※ここにスクリーンショットを入れると効果的です)*

## 🗺 コンセプト

「書くことは、冒険だ。」

孤独になりがちな執筆作業や、面倒なナレッジ管理を、目に見える「成長」として可視化します。
ユーザーは3〜4人の冒険者パーティを率いています。あなたのObsidianでの振る舞いに応じて、対応するキャラクターが勝手に育っていきます。

## 👥 パーティ・システム (The Party)

このプラグインの最大の特徴です。アクションの種類によって経験値が入るキャラクターが異なります。

| キャラクター | アイコン | 役割 | 成長トリガー | 意味合い |
| :--- | :---: | :--- | :--- | :--- |
| **勇者 (Hero)** | ⚔️ | **執筆** | 1文字ずつの入力 | 努力の証。地道にキーボードを叩いた量。 |
| **遊び人 (Playboy)** | 🍷 | **引用** | テキストのペースト | 情報収集力。外部からリソースを持ち込んだ量。 |
| **賢者 (Scholar)** | 📖 | **連結** | リンク作成 `[[ ]]` | 知識の結合。脳内ネットワークの広がり。 |
| **狩人 (Hunter)** | 🏹 | **達成** | タスク完了 `- [x]` | 実行力。完了させたタスクの数。 |

> **Note:** 現在のバージョンでは「勇者」と「遊び人」の判定ロジックが実装済みです。「賢者」と「狩人」はデータ構造に含まれており、ロジック実装待ちの状態です。

## 🎮 機能 (Features)

  * **リアルタイムXP取得:** エディタでの操作を監視し、即座に経験値を計算。
  * **レベルアップ通知:** 閾値を超えると、派手なトースト通知で祝福します。
  * **ハードモード設定:** レベルが上がるごとに必要経験値が跳ね上がる、書き手への挑戦状仕様。
  * **ステータス画面 (Ribbon UI):**
      * サイドバーの「剣アイコン」から呼び出し。
      * **DiceBear API** を利用したドット絵アバターの自動生成。
      * 現在のレベルと次のレベルまでのプログレスバー表示。

## 🛠 技術スタックと実装ポイント (For Developers)

自作プラグインとして拡張性を重視した設計になっています。

  * **Framework:** Obsidian API (TypeScript)
  * **UI:** Vanilla JS + CSS Grid Layout (ステータス画面)
  * **Assets:** DiceBear Pixel Art API (アバター生成)
  * **Data Persistence:** `data.json` への自動保存

### 判定ロジックのキモ

`editor-change` イベントをフックし、変更前後の文字数差分 (`diff`) を計算しています。

```typescript
if (diff === 1) {
    // タイピング (勇者のXP)
} else if (diff > 1) {
    // ペースト (遊び人のXP)
}
```

## 🚀 ロードマップ (Roadmap)

### Phase 1: MVP (完了/現在地)

  - [x] 勇者・遊び人の判定ロジック
  - [x] 基本的なレベルアップ計算
  - [x] ステータス画面のUI実装
  - [x] ドット絵の表示

### Phase 2: ロジック拡張 (Next Steps)

  - [ ] **賢者のロジック:** 正規表現で `[[...]]` の増加を検知。
  - [ ] **狩人のロジック:** `metadataCache` またはエディタ変更で `- [x]` の増加を検知。

### Phase 3: ゲーム性の強化 (Future)

  - [ ] **HPシステム:** 毎日書かないとHPが減り、瀕死になる（継続の強制）。
  - [ ] **アバターカスタマイズ:** 自分の好きな画像をローカルから設定可能に。
  - [ ] **ドロップアイテム:** 特定のキーワード（「完了」「解決」など）を書くとアイテム獲得。

## 📦 インストール方法 (開発者向け)

1.  このリポジトリを `YourVault/.obsidian/plugins/obsidian-quest` にクローン/配置。
2.  依存関係をインストール: `npm install`
3.  ビルドと監視を開始: `npm run dev`
4.  Obsidianの「コミュニティプラグイン」設定で有効化。

## 📜 License

MIT License

-----

**さあ、ペン（キーボード）を取れ。冒険の始まりだ！**
