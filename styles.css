/* ============================================================
   Obsidian Quest: Global Overhaul (全画面レトロ化)
   ============================================================ */

/* 1. フォント */
:root {
  --font-text-override: "DotGothic16", "MS Gothic", monospace;
  --font-interface-override: "DotGothic16", "MS Gothic", monospace;
}

/* ★ body.quest-retro-mode がついている時だけ適用 */
body.quest-retro-mode, 
body.quest-retro-mode .view-header, 
body.quest-retro-mode .status-bar, 
body.quest-retro-mode .workspace-leaf-header-title {
  font-family: var(--font-interface-override) !important;
}

body.quest-retro-mode .markdown-source-view, 
body.quest-retro-mode .cm-scroller {
  font-family: var(--font-text-override) !important;
}

/* 2. カラーパレット */
body.quest-retro-mode.theme-dark {
  --background-primary: #000000;       
  --background-secondary: #050515;     
  --background-secondary-alt: #000022; 
  
  --text-normal: #ffffff;
  --text-muted: #aaaaaa;
  --text-accent: #ffcc00; 
  
  --interactive-accent: #aa0000; 
  --interactive-accent-hover: #cc0000;
}

/* 3. ウィンドウ枠 */
body.quest-retro-mode .workspace-split, 
body.quest-retro-mode .workspace-leaf, 
body.quest-retro-mode .view-content, 
body.quest-retro-mode .workspace-tab-header-container {
  border-color: #ffffff !important; 
}

body.quest-retro-mode .workspace-ribbon, 
body.quest-retro-mode .workspace-split.mod-left-split, 
body.quest-retro-mode .workspace-split.mod-right-split {
  border-right: 4px double #ffffff !important;
  border-left: 4px double #ffffff !important;
}

/* 4. CRTエフェクト */
body.quest-retro-mode::before {
  content: " ";
  display: block;
  position: absolute;
  top: 0; left: 0; bottom: 0; right: 0;
  background: linear-gradient(
      rgba(18, 16, 16, 0) 50%, 
      rgba(0, 0, 0, 0.25) 50%
  );
  background-size: 100% 4px;
  z-index: 99999;
  pointer-events: none;
  opacity: 0.7;
}

body.quest-retro-mode::after {
  content: " ";
  display: block;
  position: absolute;
  top: 0; left: 0; bottom: 0; right: 0;
  background: radial-gradient(
      circle, 
      rgba(0,0,0,0) 60%, 
      rgba(0,0,0,0.6) 100%
  );
  z-index: 99999;
  pointer-events: none;
}

/* 5. UIパーツ */
body.quest-retro-mode .modal, 
body.quest-retro-mode .popover, 
body.quest-retro-mode .menu {
  border-radius: 4px !important;
  border: 4px double #ffffff !important;
  background-color: #000022 !important;
  box-shadow: none !important;
}

body.quest-retro-mode button.mod-cta {
  background-color: #aa0000 !important;
  box-shadow: 2px 2px 0px #ffffff;
  border: none;
  border-radius: 0;
}

/* ============================================================
   以下は設定OFFでも有効にする共通スタイル
   ============================================================ */

/* Wandering Party */
.quest-wanderer {
    position: fixed;
    width: 48px;
    height: 48px;
    z-index: 9999; 
    cursor: grab; 
    transition: top 3s ease-in-out, left 3s ease-in-out;
    image-rendering: pixelated;
    filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
    user-select: none;
}

.quest-wanderer:active {
    cursor: grabbing;
    transition: none;
}

@keyframes quest-jump {
    0% { transform: translateY(0) scaleX(1); }
    50% { transform: translateY(-20px) scaleX(1); }
    100% { transform: translateY(0) scaleX(1); }
}

.quest-jump {
    animation: quest-jump 0.5s ease;
}

/* Dashboard Style */
.quest-dashboard-wrapper {
    padding: 0 !important;
    overflow: hidden;
    background-color: #000;
}